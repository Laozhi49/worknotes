
---
## é¦™æ©™æ´¾zero3å¼•è„šå›¾
![å¼•è„šå›¾](é¦™æ©™æ´¾zero3å¼•è„šå›¾.png)

## ğŸ§­ ä¸€ã€ç¡®å®šç¡¬ä»¶æ¥å£

é¦™æ©™æ´¾ä¸Š SoCï¼ˆä¾‹å¦‚ H616ï¼‰æ”¯æŒå¤šä¸ª UARTï¼Œä½†**å¹¶ä¸æ˜¯æ‰€æœ‰éƒ½å¼•å‡ºæ¥**ã€‚

| UART åç§° | è®¾å¤‡èŠ‚ç‚¹         | å…¸å‹å¼•è„šï¼ˆ40Pin GPIOï¼‰          | é»˜è®¤çŠ¶æ€            |
| ------- | ------------ | ------------------------- | --------------- |
| UART0   | `/dev/ttyS0` | è°ƒè¯•å£ï¼ˆæ¿è½½ USB ä¸²å£ï¼‰            | å·²å¯ç”¨ï¼Œç”¨äºç³»ç»Ÿæ—¥å¿—      |
| UART1   | `/dev/ttyS1` | PIN 8 (TX) / PIN 10 (RX)  | å¯ç”¨ï¼ˆéœ€å¯ç”¨ overlayï¼‰ |
| UART5   | `/dev/ttyS5` | PIN 32 (TX) / PIN 33 (RX) | âœ… æ¿ä¸Šå¼•å‡ºï¼Œæœ€å¸¸ç”¨      |

> âš ï¸ ç”µå¹³ä¸º **3.3 V TTL**ï¼Œä¸è¦ç›´æ¥æ¥ 5 V ä¸²å£æ¨¡å—ã€‚

---

## âš™ï¸ äºŒã€å¯ç”¨å¯¹åº”ä¸²å£ï¼ˆæœ€æ ¸å¿ƒï¼‰

### 1ï¸âƒ£ ç¼–è¾‘ç³»ç»Ÿé…ç½®æ–‡ä»¶

æ‰“å¼€ï¼š

```bash
sudo nano /boot/orangepiEnv.txt
```

æ·»åŠ æˆ–ä¿®æ”¹å†…å®¹ï¼š

```bash
overlays=ph-uart5
param_uart5_rtscts=1
```
å¯åŠ¨å¤šä¸ªä¸²å£çš„æ—¶å€™å¯ä»¥è¿™æ ·å†™ï¼š
```bash
overlays=pi-uart2 pi-uart3 ph-uart5
param_uart2_rtscts=1
param_uart3_rtscts=1
param_uart5_rtscts=1
```

> * â€œph-uart5â€ æ˜¯ Zero 3 çš„æ­£ç¡® overlay åç§°ï¼ˆä¸æ˜¯ uart5ï¼‰
> * å¦‚æœç”¨ UART1ï¼Œåˆ™å†™ `overlays=uart1`

ä¿å­˜é€€å‡ºï¼š`Ctrl+O` â†’ å›è½¦ â†’ `Ctrl+X`

*overlaysä¸­ph-uart5çš„åç§°å¯èƒ½æ¿å­ä¸åŒï¼Œåç§°ä¹Ÿä¸åŒ*

å¯ä»¥è¿è¡Œä»¥ä¸‹ä»£ç æŸ¥çœ‹:
```bash
ls /boot/dtb/allwinner/overlay | grep uart5

#å¯èƒ½ä¼šè¾“å‡ºä»¥ä¸‹å†…å®¹
sun50i-h616-ph-uart2.dtbo 
sun50i-h616-ph-uart5.dtbo 
sun50i-h616-pi-uart2.dtbo 
sun50i-h616-pi-uart3.dtbo 
sun50i-h616-pi-uart4.dtbo
#è¯´æ˜ä¸²å£5åœ¨overlayçš„æ­£ç¡®åç§°æ˜¯ph-uart5
```

---

### 2ï¸âƒ£ é‡å¯ç³»ç»Ÿ

```bash
sudo reboot
```

---

### 3ï¸âƒ£ éªŒè¯æ˜¯å¦ç”Ÿæ•ˆ

æŸ¥çœ‹å†…æ ¸æ—¥å¿—ï¼š

```bash
dmesg | grep ttyS
```

å‡ºç°ï¼š

```
sunxi-uart 5002000.serial: ttyS5 at MMIO ...
```

âœ… è¡¨ç¤º UART5 å¯ç”¨æˆåŠŸã€‚

---

## ğŸš« ä¸‰ã€é‡Šæ”¾ç³»ç»Ÿå ç”¨ï¼ˆé˜²æ­¢å†²çªï¼‰

ç³»ç»Ÿå¯èƒ½è‡ªåŠ¨å¯åŠ¨ä¸€ä¸ªç»ˆç«¯æœåŠ¡å ç”¨ä¸²å£ã€‚

å…³é—­å®ƒï¼š

```bash
sudo systemctl stop serial-getty@ttyS5.service
sudo systemctl disable serial-getty@ttyS5.service
```

---

## ğŸ” å››ã€è®¾ç½®è®¿é—®æƒé™

ä¸²å£é»˜è®¤å±äº `dialout` ç»„ã€‚

æ£€æŸ¥ï¼š

```bash
ls -l /dev/ttyS5
groups orangepi
```

å¦‚æœç”¨æˆ·ä¸åœ¨ `dialout` ç»„ï¼š

```bash
sudo usermod -aG dialout orangepi
```

é‡æ–°ç™»å½•ç”Ÿæ•ˆã€‚

---

## ğŸ§ª äº”ã€æµ‹è¯•ä¸²å£æ˜¯å¦å·¥ä½œ

1. çŸ­æ¥ TX ä¸ RXï¼ˆè‡ªå‘è‡ªæ”¶ï¼‰
2. å®‰è£… minicomï¼š

   ```bash
   sudo apt install minicom -y
   ```
3. æ‰“å¼€æµ‹è¯•ï¼š

   ```bash
   sudo minicom -D /dev/ttyS5 -b 115200
   ```
4. è¾“å…¥å­—ç¬¦ â†’ èƒ½å›æ˜¾å³æˆåŠŸ âœ…

---

## ğŸ å…­ã€Python ç¨‹åºä½¿ç”¨ç¤ºä¾‹

```python
import serial
import time

# æ‰“å¼€ä¸²å£
ser = serial.Serial('/dev/ttyS5', 115200, timeout=0.5)

# å‘é€æ•°æ®
ser.write(b'Hello OrangePi!\n')

# è¯»å–æ•°æ®
while True:
    data = ser.readline()
    if data:
        print("Received:", data.decode().strip())
    time.sleep(0.1)
```

è¿è¡Œï¼š

```bash
sudo python3 test_serial.py
```

---

## ğŸ§  ä¸ƒã€å¸¸è§é—®é¢˜ä¸è§£å†³

| é—®é¢˜                   | å¯èƒ½åŸå›               | è§£å†³åŠæ³•                                     |
| -------------------- | ----------------- | ---------------------------------------- |
| `Input/output error` | overlay æœªå¯ç”¨æˆ–ç«¯å£è¢«å ç”¨ | æ£€æŸ¥ `/boot/orangepiEnv.txt` ä¸ `systemctl` |
| `/dev/ttyS5` ä¸å­˜åœ¨     | overlay åå†™é”™æˆ–æœªåŠ è½½   | ä½¿ç”¨ `ph-uart5` åç§°                         |
| æ— æ³•å‘é€/æ¥æ”¶æ•°æ®            | TX/RX æ¥åã€GND æœªå…±åœ°  | æ£€æŸ¥è¿çº¿                                     |
| è®¿é—®è¢«æ‹’ç»                | æ²¡æœ‰ dialout æƒé™     | åŠ å…¥ `dialout` ç»„                           |
| ä¸²å£å¹²æ‰°ã€ä¹±ç               | æ³¢ç‰¹ç‡ä¸åŒ¹é…            | æ£€æŸ¥æ³¢ç‰¹ç‡è®¾ç½®                                  |

---

## ğŸ§¾ å…«ã€æ€»ç»“å‘½ä»¤æ¸…å•ï¼ˆæœ€å°å¯è¡Œæ­¥éª¤ï¼‰

```bash
# 1. ç¼–è¾‘é…ç½®æ–‡ä»¶
sudo nano /boot/orangepiEnv.txt
# æ·»åŠ :
# overlays=ph-uart5
# param_uart5_rtscts=1

# 2. é‡å¯
sudo reboot

# 3. éªŒè¯
dmesg | grep ttyS

# 4. åœç”¨å ç”¨æœåŠ¡
sudo systemctl stop serial-getty@ttyS5.service
sudo systemctl disable serial-getty@ttyS5.service

# 5. æµ‹è¯•
sudo minicom -D /dev/ttyS5 -b 115200
```

---
